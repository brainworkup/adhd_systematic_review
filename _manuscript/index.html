<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.13">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-02-21">

<title>Adult ADHD Systematic Review</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-66ab7fd5e73b7f0a764e0d49b3e29ab1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-10daa034703793678e481cc8cee6d76f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<meta name="citation_title" content="Adult ADHD Systematic Review">
<meta name="citation_author" content="Joey W. Trampush, Ph.D.">
<meta name="citation_publication_date" content="2025-02-21">
<meta name="citation_cover_date" content="2025-02-21">
<meta name="citation_year" content="2025">
<meta name="citation_online_date" content="2025-02-21">
<meta name="citation_language" content="en">
<meta name="citation_reference" content="citation_title=Literate programming;,citation_author=Donald E. Knuth;,citation_publication_date=1984-05;,citation_cover_date=1984-05;,citation_year=1984;,citation_fulltext_html_url=https://doi.org/10.1093/comjnl/27.2.97;,citation_issue=2;,citation_doi=10.1093/comjnl/27.2.97;,citation_issn=0010-4620;,citation_volume=27;,citation_journal_title=Comput. J.;,citation_publisher=Oxford University Press, Inc.;">
</head>

<body>

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Adult ADHD Systematic Review</h1>
          </div>

    
    <div class="quarto-title-meta-container">
      <div class="quarto-title-meta-column-start">
            <div class="quarto-title-meta-author">
          <div class="quarto-title-meta-heading">Author</div>
          <div class="quarto-title-meta-heading">Affiliation</div>
          
                <div class="quarto-title-meta-contents">
            <p class="author">Joey W. Trampush, Ph.D. </p>
          </div>
                <div class="quarto-title-meta-contents">
                    <p class="affiliation">
                        University of Southern California
                      </p>
                  </div>
                    </div>
        
        <div class="quarto-title-meta">

                      
                <div>
            <div class="quarto-title-meta-heading">Published</div>
            <div class="quarto-title-meta-contents">
              <p class="date">February 21, 2025</p>
            </div>
          </div>
          
                
              </div>
      </div>
      <div class="quarto-title-meta-column-end quarto-other-formats-target">
      <div class="quarto-alternate-formats"><div class="quarto-title-meta-heading">Other Formats</div><div class="quarto-title-meta-contents"><p><a href="index.docx"><i class="bi bi-file-word"></i>MS Word</a></p></div><div class="quarto-title-meta-contents"><p><a href="index.pdf"><i class="bi bi-file-pdf"></i>Typst</a></p></div><div class="quarto-title-meta-contents"><p><a href="index-meca.zip" data-meca-link="true"><i class="bi bi-archive"></i>MECA Bundle</a></p></div></div></div>
    </div>



    <div class="quarto-other-links-text-target">
    </div>  </div>
</header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">Background</a>
  <ul class="collapse">
  <li><a href="#trajectory-of-adhd-across-development" id="toc-trajectory-of-adhd-across-development" class="nav-link" data-scroll-target="#trajectory-of-adhd-across-development">Trajectory of ADHD across development</a></li>
  <li><a href="#executive-dysfunction-in-emerging-adulthood" id="toc-executive-dysfunction-in-emerging-adulthood" class="nav-link" data-scroll-target="#executive-dysfunction-in-emerging-adulthood">Executive dysfunction in emerging adulthood</a></li>
  <li><a href="#limited-diagnostic-tools-to-assess-adhd-and-executive-functioning-in-college-students" id="toc-limited-diagnostic-tools-to-assess-adhd-and-executive-functioning-in-college-students" class="nav-link" data-scroll-target="#limited-diagnostic-tools-to-assess-adhd-and-executive-functioning-in-college-students">Limited diagnostic tools to assess ADHD and executive functioning in college students</a></li>
  <li><a href="#diagnostic-tools-and-approaches" id="toc-diagnostic-tools-and-approaches" class="nav-link" data-scroll-target="#diagnostic-tools-and-approaches">Diagnostic Tools and Approaches</a></li>
  <li><a href="#differential-diagnosis" id="toc-differential-diagnosis" class="nav-link" data-scroll-target="#differential-diagnosis">Differential Diagnosis</a></li>
  <li><a href="#cultural-and-socioeconomic-factors" id="toc-cultural-and-socioeconomic-factors" class="nav-link" data-scroll-target="#cultural-and-socioeconomic-factors">Cultural and Socioeconomic Factors</a></li>
  <li><a href="#impact" id="toc-impact" class="nav-link" data-scroll-target="#impact">Impact</a></li>
  </ul></li>
  <li><a href="#key-decisional-dilemmas" id="toc-key-decisional-dilemmas" class="nav-link" data-scroll-target="#key-decisional-dilemmas">Key Decisional Dilemmas</a></li>
  <li><a href="#controversies-and-challenges" id="toc-controversies-and-challenges" class="nav-link" data-scroll-target="#controversies-and-challenges">Controversies and Challenges</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
<div class="quarto-alternate-notebooks"><h2>Notebooks</h2><ul><li><a href="adhd_studies_table_2025-02-20-preview.html"><i class="bi bi-journal-code"></i>ADHD Diagnostic Studies: Categorized by Measurement Type</a></li><li><a href="risk_of_bias-preview.html"><i class="bi bi-journal-code"></i>ADHD Dx ris of bias</a></li><li><a href="dx_broad_categories-preview.html"><i class="bi bi-journal-code"></i>Categorization of Diagnostic Tools</a></li><li><a href="diagnostics_protocol/revised_dx_protocol-preview.html"><i class="bi bi-journal-code"></i>Evidence-based Practice Center Systematic Review Draft Protocol</a></li><li><a href="docs/rob_faraone2000-preview.html"><i class="bi bi-journal-code"></i>Faraone et al. (2000) #249:</a></li><li><a href="gpt1-preview.html"><i class="bi bi-journal-code"></i>Grant Application Summary: Key Decisional Dilemma for ADHD Diagnosis and Treatment in Adults</a></li><li><a href="reports/brad-preview.html"><i class="bi bi-journal-code"></i>Key decisional dilemma for the evidence review</a></li><li><a href="adult_adhd_manuscript-preview.html"><i class="bi bi-journal-code"></i>Manuscript for Adult ADHD Systematic Review</a></li><li><a href="print_friendly_risk_checklist-preview.html"><i class="bi bi-journal-code"></i>Methodological Evaluation Criteria for Risk of Bias Assessment in Adult ADHD Diagnostic Studies</a></li><li><a href="risk_checklist-preview.html"><i class="bi bi-journal-code"></i>METHODOLOGICAL EVALUATION CRITERIA FOR RISK OF BIAS ASSESSMENT IN ADULT ADHD DIAGNOSTIC STUDIES</a></li><li><a href="qb_test-preview.html"><i class="bi bi-journal-code"></i>qb_test.qmd</a></li><li><a href="outputs/tables/tables-preview.html"><i class="bi bi-journal-code"></i>Table 1: CPT Study Characteristics and Methodological Features</a></li></ul></div></nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">



  


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Attention-Deficit/Hyperactivity Disorder (ADHD) in adults presents a significant challenge in clinical practice due to its complex presentation, high comorbidity, and the varying responses to treatment. Clinicians, patients, and stakeholders must navigate several decisional dilemmas when diagnosing and treating ADHD in adults. Here, we address the key decisional dilemmas and current controversies and challenges in diagnosing ADHD in adults.</p>
<p>Attention-deficit/hyperactivity disorder (ADHD) is a neurodevelopmental condition characterized by persistent patterns of inattention, hyperactivity, and impulsivity. While it is commonly diagnosed in children, ADHD frequently persists into adulthood, presenting unique challenges for diagnosis and management. This section explores the key decisional dilemmas faced by clinicians, patients, and stakeholders in diagnosing and treating adult ADHD.</p>
</section>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<section id="trajectory-of-adhd-across-development" class="level3">
<h3 class="anchored" data-anchor-id="trajectory-of-adhd-across-development">Trajectory of ADHD across development</h3>
<p>ADHD typically presents early in life, most often diagnosed and treated between early childhood and adolescence. Less commonly, ADHD can insidiously emerge in adulthood in individuals with no history of inattention, hyperactivity, or impulsivity in childhood. Notably, longitudinal data from the MTA ADHD Treatment Study suggests 90-95% of “adult-onset ADHD” is better accounted for by comorbid psychopathology, personality disorders, and/or substance use disorders <em>misdiagnosed</em> as ADHD <span class="citation" data-cites="sibley2017">(<a href="#ref-sibley2017" role="doc-biblioref"><strong>sibley2017?</strong></a>)</span>. The later-onset expression of ADHD thus appears to be a syndrome distinct from childhood-onset ADHD.</p>
</section>
<section id="executive-dysfunction-in-emerging-adulthood" class="level3">
<h3 class="anchored" data-anchor-id="executive-dysfunction-in-emerging-adulthood">Executive dysfunction in emerging adulthood</h3>
<p>Seeking evaluation and treatment for ADHD <em>for the first time</em> continues to increase, and is especially salient on college campuses, where the use/misuse of prescription stimulant medication as a cognitive-enhancing drug is rising faster than the actual incidence of the disorder <span class="citation" data-cites="benson2015">(<a href="#ref-benson2015" role="doc-biblioref"><strong>benson2015?</strong></a>)</span>. The volume of college students seeking an evaluation for ADHD to obtain test-taking and other academic accommodations has increased in parallel.</p>
<p>Critically, interconnected heteromodal networks of association cortex that control higher executive cognitive functions are still maturing during college <span class="citation" data-cites="sydnorNeurodevelopmentAssociationCortices2021">(<a href="#ref-sydnorNeurodevelopmentAssociationCortices2021" role="doc-biblioref"><strong>sydnorNeurodevelopmentAssociationCortices2021?</strong></a>)</span>. It is therefore plausible that generalized <em>executive dysfunction</em>, not undiagnosed ADHD per se, is underlying most clinical referrals for ADHD in college students. As such, we posit executive dysfunction is at the core of the real-world problems facing college students who self-refer for ADHD evaluation and treatment, which accentuates the comorbid difficulties these students face such as problematic drug and alcohol use, emotional dysregulation, and school failure.</p>
</section>
<section id="limited-diagnostic-tools-to-assess-adhd-and-executive-functioning-in-college-students" class="level3">
<h3 class="anchored" data-anchor-id="limited-diagnostic-tools-to-assess-adhd-and-executive-functioning-in-college-students">Limited diagnostic tools to assess ADHD and executive functioning in college students</h3>
<p>Independent of when symptoms first present, the proliferation of adult-onset ADHD, whether real or feigned, signifies an increase in the demand to evaluate and treat ADHD across the lifespan. However, <em>clinicians do not have evidence-based, objective psychodiagnostic tools</em> (e.g., rating scales, neuropsychological measures) available to evaluate ADHD/EF in this specific population <em>that grows each year</em>. Poor diagnostic tools lead to inaccurate and misleading conclusions, which can result in clinicians making wasteful/cost-ineffective, inappropriate, or potentially even harmful treatment recommendations. If we fail to implement clinical assessment tools sensitive to <em>symptom validity</em> and <em>performance validity</em> during evaluations, we will continue to <em>overdiagnose</em> and treat college students and adults from the community faking ADHD for secondary gain, and <em>underdiagnose</em> those with actual ADHD who need medical and/or academic intervention.</p>
</section>
<section id="diagnostic-tools-and-approaches" class="level3">
<h3 class="anchored" data-anchor-id="diagnostic-tools-and-approaches">Diagnostic Tools and Approaches</h3>
<ul>
<li><p><strong>Use of Standardized Tools</strong>: Reliable diagnosis requires standardized rating scales and input from multiple informants, including self-reports, and observations by family members and colleagues.</p></li>
<li><p><strong>Clinical Judgment vs.&nbsp;Standardized Assessment</strong>: Clinician judgment, while essential, may be supplemented by objective tools such as neuropsychological tests and behavioral assessments to enhance diagnostic accuracy.</p></li>
</ul>
</section>
<section id="differential-diagnosis" class="level3">
<h3 class="anchored" data-anchor-id="differential-diagnosis">Differential Diagnosis</h3>
<ul>
<li><p><strong>Comorbidity with Other Disorders</strong>: Adults with ADHD often present with comorbid psychiatric conditions such as depression, anxiety, and substance use disorders, complicating the diagnostic process. Accurate differentiation between ADHD and these conditions is crucial.</p></li>
<li><p><strong>Overlap with Other Symptoms</strong>: Symptoms of ADHD, such as inattention, can overlap with those of other psychiatric disorders, making differential diagnosis challenging.</p></li>
</ul>
</section>
<section id="cultural-and-socioeconomic-factors" class="level3">
<h3 class="anchored" data-anchor-id="cultural-and-socioeconomic-factors">Cultural and Socioeconomic Factors</h3>
<ul>
<li><strong>Bias and Accessibility</strong>: Diagnostic practices may be influenced by cultural biases and socioeconomic factors, leading to disparities in diagnosis rates among different demographic groups. It is important to consider these factors to ensure equitable access to diagnosis and treatment.</li>
</ul>
</section>
<section id="impact" class="level3">
<h3 class="anchored" data-anchor-id="impact">Impact</h3>
<p>ADHD remains improperly diagnosed and treated in tens of thousands of promising college students, younger adults, and older adults. The consequences of aberrant diagnosis and treatment of ADHD during this critical stage of emerging adulthood and beyond can lead to functional impairments in school/work performance, educational attainment, career development, social-emotional development, and family and community life. The need for evidence-based diagnostic tools specific to this rapidly growing clinical population is urgently stronger than ever.</p>
</section>
</section>
<section id="key-decisional-dilemmas" class="level2">
<h2 class="anchored" data-anchor-id="key-decisional-dilemmas">Key Decisional Dilemmas</h2>
<p>The primary decisional dilemmas for clinicians, patients, and stakeholders in diagnosing and managing ADHD in adults involve the following considerations:</p>
<ul>
<li><strong>Diagnosis Challenges</strong>: Clinicians must decide whether presenting symptoms are due to ADHD or other comorbid conditions such as anxiety, depression, or substance use disorders <span class="citation" data-cites="kooij2010">(<a href="#ref-kooij2010" role="doc-biblioref"><strong>kooij2010?</strong></a>)</span>.</li>
<li><strong>Treatment Initiation</strong>: Decisions regarding who should initiate treatment (e.g., primary care vs.&nbsp;specialty care) and when to start treatment are crucial <span class="citation" data-cites="nice2018">(<a href="#ref-nice2018" role="doc-biblioref"><strong>nice2018?</strong></a>)</span>.</li>
<li><strong>Treatment Alternatives</strong>: Providers need to determine the most effective treatment modalities, including pharmacological and non-pharmacological interventions <span class="citation" data-cites="cortese2018">(<a href="#ref-cortese2018" role="doc-biblioref"><strong>cortese2018?</strong></a>)</span>. Further, clinicians must weigh the benefits and risks of stimulant medications versus non-stimulant medications <span class="citation" data-cites="bolea2014">(<a href="#ref-bolea2014" role="doc-biblioref"><strong>bolea2014?</strong></a>)</span>.</li>
<li><strong>Patient Characteristics</strong>: Treatment effectiveness may vary based on individual patient characteristics such as age, sex, and comorbid conditions <span class="citation" data-cites="faraone2015">(<a href="#ref-faraone2015" role="doc-biblioref"><strong>faraone2015?</strong></a>)</span>.</li>
<li><strong>Cultural Considerations</strong>: Cultural differences may impact the presentation, diagnosis, and treatment of ADHD in adults <span class="citation" data-cites="bruss2012">(<a href="#ref-bruss2012" role="doc-biblioref"><strong>bruss2012?</strong></a>)</span>.</li>
<li><strong>Unintended Consequences</strong>: The potential for stimulant diversion and misuse is a significant concern when prescribing stimulant medications <span class="citation" data-cites="wilens2008">(<a href="#ref-wilens2008" role="doc-biblioref"><strong>wilens2008?</strong></a>)</span>.</li>
<li><strong>Identification and Assessment</strong>: What are the most effective and reliable methods for diagnosing ADHD in adults? Considerations include standardized diagnostic criteria, use of rating scales, and the role of clinical interviews. Further, referral for neuropsychological evaluation for adult ADHD is increasingly common, given the complexity and heterogeneity of the disorder. <span class="citation" data-cites="barkley2008">(<a href="#ref-barkley2008" role="doc-biblioref"><strong>barkley2008?</strong></a>)</span></li>
<li><strong>Differential Diagnosis</strong>: How can clinicians distinguish ADHD from other psychiatric conditions such as anxiety, depression, or personality disorders <span class="citation" data-cites="kooij2010">(<a href="#ref-kooij2010" role="doc-biblioref"><strong>kooij2010?</strong></a>)</span>?</li>
<li><strong>Cultural and Socioeconomic Factors</strong>: How do cultural perceptions and socioeconomic status affect the diagnosis of ADHD in adults <span class="citation" data-cites="ramos-quiroga2012">(<a href="#ref-ramos-quiroga2012" role="doc-biblioref"><strong>ramos-quiroga2012?</strong></a>)</span>?</li>
<li><strong>Stigma and Misdiagnosis</strong>: What impact does stigma have on the diagnosis of ADHD in adults, and how can misdiagnosis be minimized <span class="citation" data-cites="timimi2005">(<a href="#ref-timimi2005" role="doc-biblioref"><strong>timimi2005?</strong></a>)</span>?</li>
</ul>
</section>
<section id="controversies-and-challenges" class="level2">
<h2 class="anchored" data-anchor-id="controversies-and-challenges">Controversies and Challenges</h2>
<p>Diagnosing ADHD in adults is inherently challenging. Symptoms such as inattention, hyperactivity, and impulsivity often overlap with other psychiatric conditions, making differential diagnosis difficult. Clinicians must consider the chronicity of symptoms from childhood through adulthood and assess functional impairment in various settings <span class="citation" data-cites="culpepper2008">(<a href="#ref-culpepper2008" role="doc-biblioref"><strong>culpepper2008?</strong></a>)</span>.</p>
<ul>
<li><strong>Different Practices</strong>: There is significant variability in diagnostic practices. While some clinicians use structured diagnostic interviews and validated rating scales, others rely on clinical judgment. This inconsistency can lead to both over-diagnosis and under-diagnosis of ADHD <span class="citation" data-cites="culpepper2008">(<a href="#ref-culpepper2008" role="doc-biblioref"><strong>culpepper2008?</strong></a>)</span>.</li>
<li><strong>Diagnostic Criteria</strong>: There is debate over whether the DSM-5 criteria for ADHD, primarily developed for children, are fully applicable to adults <span class="citation" data-cites="asherson2016">(<a href="#ref-asherson2016" role="doc-biblioref"><strong>asherson2016?</strong></a>)</span>.</li>
<li><strong>Overdiagnosis vs.&nbsp;Underdiagnosis</strong>: Controversy exists over the extent to which ADHD is overdiagnosed or underdiagnosed in adult populations <span class="citation" data-cites="faraone2021">(<a href="#ref-faraone2021" role="doc-biblioref"><strong>faraone2021?</strong></a>)</span>.</li>
<li><strong>Gender Differences</strong>: The diagnosis of ADHD in women may be underrepresented due to differences in symptom presentation and societal expectations <span class="citation" data-cites="quinn2014">(<a href="#ref-quinn2014" role="doc-biblioref"><strong>quinn2014?</strong></a>)</span>.</li>
<li><strong>Comorbidity</strong>: High rates of comorbidity with other psychiatric disorders complicate the diagnosis of ADHD in adults <span class="citation" data-cites="kessler2006">(<a href="#ref-kessler2006" role="doc-biblioref"><strong>kessler2006?</strong></a>)</span>.</li>
<li><strong>Diagnostic Criteria and Symptom Manifestation</strong>: Adult ADHD diagnosis is complicated by the persistence and transformation of symptoms from childhood. Symptoms such as inattention and impulsivity may persist, while hyperactivity may manifest differently in adults.</li>
<li><strong>Diagnostic Criteria Adaptation</strong>: Current diagnostic criteria (e.g., DSM-5) are based primarily on childhood symptoms, which may not fully capture adult presentations. There is a need for criteria that reflect adult-specific symptoms and impairments.</li>
</ul>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>The accurate diagnosis of ADHD in adults presents several decisional dilemmas for clinicians and patients. These include the adaptation of diagnostic criteria, the use of standardized tools, consideration of comorbidities, and the hard truth that many individuals are blatantly feigning their symptoms.</p>
<p>adhd_systematic_review/ ├── _quarto.yml # Project configuration ├── index.qmd # Project overview ├── data/ │ ├── raw_pdfs/ # Original PDFs │ ├── processed/ # Extracted text and metadata │ └── metadata.csv # Study tracking spreadsheet ├── R/ │ ├── 01_pdf_processing.R # PDF text extraction │ ├── 02_metadata_extract.R # Structured data extraction │ ├── 03_quality_assessment.R # Study quality metrics │ └── 04_analysis.R # Final analysis scripts ├── outputs/ │ ├── tables/ │ └── figures/ └── docs/ # Generated reports</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>